<!doctype html>
<html lang="en">
    <head>
        <title>class X::Syntax::Perl5Var</title>
        <meta charset="UTF-8" />
        <style>
        kbd { font-family: "Droid Sans Mono", "Luxi Mono", "Inconsolata", monospace }
        samp { font-family: "Terminus", "Courier", "Lucida Console", monospace }
        u { text-decoration: none }
        .nested {
            margin-left: 3em;
        }
        aside, u { opacity: 0.7 }
        a[id^="fn-"]:target { background: #ff0 }
        </style>
        
        
        <meta name=viewport content="width=device-width, initial-scale=1">
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" type="text/css" href="/css/app.css?v=7" media="screen" title="default" />
<noscript> <style> #search { visibility: hidden; } </style> </noscript>

    </head>
    <body class="pod">
    <div id="___top"></div>
    <div id="header" class="pretty-box green">
  <a href="/"
    ><img
      src="/images/Camelia.svg"
      alt="»ö«"
      id="logo"
      width="62"
      height="48"
    />&nbsp;Perl 6 Documentation</a
  >
  <div id="search" class="ui-widget">
    <div class="green">
      <input
        placeholder="Loading..."
        id="query"
        accesskey="f"
        title="Enter term to search for (hit Esc to focus)"
      />
    </div>
    <p id="not-found-message">
      Not in Index (<a href="" id="try-web-search">try site search</a>)
    </p>
  </div>
  <div class="menu">
    <div class="menu-items dark-green"><a class='menu-item darker-green' href='https://perl6.org'><strong>Perl&nbsp;6 homepage</strong></a>  <a class="menu-item " href="/language.html"> Language </a> <a class="menu-item selected darker-green" href="/type.html"> Types </a> <a class="menu-item " href="/routine.html"> Routines </a> <a class="menu-item " href="/programs.html"> Programs </a> <a class="menu-item " href="https://webchat.freenode.net/?channels=#perl6"> Chat with us </a></div><div class="menu-items darker-green"><a class="menu-item" href="/type.html">All</a><a class="menu-item" href="/type-basic.html"> Basic </a> <a class="menu-item" href="/type-composite.html"> Composite </a> <a class="menu-item" href="/type-domain-specific.html"> Domain-specific </a> <a class="menu-item" href="/type-exception.html"> Exceptions </a> </div>
  </div>
</div>
<div id="content" class="pretty-box yellow content__type_X__Syntax__Perl5Var">
  
      <div align="right">
        <button title="Edit this page"  class="pencil" onclick="location='https://github.com/perl6/doc/edit/master/doc/Type/X::Syntax::Perl5Var.pod6'">
        <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs></defs>
    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="pencil" fill="#000000">
            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
        </g>
    </g>
</svg>

        </button>
      </div>

    <h1 class='title'>class X::Syntax::Perl5Var</h1>
    <p class='subtitle'>Compilation error due to use of Perl&nbsp;5-only default variables</p>
    <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
              <tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#Type_Graph">Type Graph</a></td></tr>
  <tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="#Routines_supplied_by_class_Exception">Routines supplied by class Exception</a></td></tr>
    <tr class="toc-level-2"><td class="toc-number">2.1</td><td class="toc-text"><a href="#(Exception)_method_message">(Exception) method message</a></td></tr>
      <tr class="toc-level-2"><td class="toc-number">2.2</td><td class="toc-text"><a href="#(Exception)_method_backtrace">(Exception) method backtrace</a></td></tr>
       <tr class="toc-level-2"><td class="toc-number">2.3</td><td class="toc-text"><a href="#(Exception)_method_throw">(Exception) method throw</a></td></tr>
     <tr class="toc-level-2"><td class="toc-number">2.4</td><td class="toc-text"><a href="#(Exception)_method_resume">(Exception) method resume</a></td></tr>
         <tr class="toc-level-2"><td class="toc-number">2.5</td><td class="toc-text"><a href="#(Exception)_method_rethrow">(Exception) method rethrow</a></td></tr>
       <tr class="toc-level-2"><td class="toc-number">2.6</td><td class="toc-text"><a href="#(Exception)_method_fail">(Exception) method fail</a></td></tr>
                     <tr class="toc-level-2"><td class="toc-number">2.7</td><td class="toc-text"><a href="#(Exception)_method_gist">(Exception) method gist</a></td></tr>
     <tr class="toc-level-2"><td class="toc-number">2.8</td><td class="toc-text"><a href="#(Exception)_sub_die">(Exception) sub die</a></td></tr>
                                                       <tr class="toc-level-2"><td class="toc-number">2.9</td><td class="toc-text"><a href="#(Exception)_sub_warn">(Exception) sub warn</a></td></tr>
                   
</table>
</nav>

    <div class="pod-body">
    <pre class="pod-block-code">class X::Syntax::Perl5Var does X::Syntax { }</pre>
<p>Syntax error thrown when some piece of code tries to use one of the old Perl 5 variables (and it does not error for some other reason).</p>
<pre class="pod-block-code">say $];
</pre>
<p>dies with</p>
<pre class="pod-block-code">Unsupported use of $] variable; in Perl 6 please use $*PERL.version or $*PERL.compiler.version
</pre>
<p>For every unsupported variable (which include most <code>$^&#39;letter&#39;</code> constructs, as well as others like <code>$&quot;</code>, the error message will mention that the variable is unsupported and the equivalent commands you could use.</p>
<h1 id="Type_Graph"><a class="u" href="#___top" title="go to top of document">Type Graph</a></h1>
<figure>
  <figcaption>Type relations for <code>X::Syntax::Perl5Var</code></figcaption>
  <svg width="260pt" height="404pt"
 viewBox="0.00 0.00 259.94 404.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 400)">
<title>perl6&#45;type&#45;graph</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-400 255.938,-400 255.938,4 -4,4"/>
<!-- X::Syntax::Perl5Var -->
<g id="node1" class="node"><title>X::Syntax::Perl5Var</title>
<g id="a_node1"><a xlink:href="/type/X::Syntax::Perl5Var" xlink:title="X::Syntax::Perl5Var">
<ellipse fill="none" stroke="#000000" cx="87.0923" cy="-18" rx="87.1846" ry="18"/>
<text text-anchor="middle" x="87.0923" y="-14.3" font-family="FreeSans" font-size="14.00" fill="#000000">X::Syntax::Perl5Var</text>
</a>
</g>
</g>
<!-- Exception -->
<g id="node4" class="node"><title>Exception</title>
<g id="a_node4"><a xlink:href="/type/Exception" xlink:title="Exception">
<ellipse fill="none" stroke="#000000" cx="110.092" cy="-234" rx="49.2915" ry="18"/>
<text text-anchor="middle" x="110.092" y="-230.3" font-family="FreeSans" font-size="14.00" fill="#000000">Exception</text>
</a>
</g>
</g>
<!-- X::Syntax::Perl5Var&#45;&gt;Exception -->
<g id="edge1" class="edge"><title>X::Syntax::Perl5Var&#45;&gt;Exception</title>
<path fill="none" stroke="#000000" d="M85.0581,-36.1508C85.5028,-73.3384 94.7339,-161.626 102.564,-206.228"/>
<polygon fill="#000000" stroke="#000000" points="99.1262,-206.884 104.415,-216.065 106.005,-205.59 99.1262,-206.884"/>
</g>
<!-- X::Syntax::Perl5Var&#45;&gt;Exception -->
<g id="edge2" class="edge"><title>X::Syntax::Perl5Var&#45;&gt;Exception</title>
<path fill="none" stroke="#000000" d="M92.8131,-36.1508C100.327,-73.1683 110.019,-160.819 111.841,-205.614"/>
<polygon fill="#000000" stroke="#000000" points="108.347,-205.87 112.125,-215.768 115.344,-205.673 108.347,-205.87"/>
</g>
<!-- X::Syntax -->
<g id="node6" class="node"><title>X::Syntax</title>
<g id="a_node6"><a xlink:href="/type/X::Syntax" xlink:title="X::Syntax">
<ellipse fill="none" stroke="#6666ff" cx="172.092" cy="-90" rx="48.1917" ry="18"/>
<text text-anchor="middle" x="172.092" y="-86.3" font-family="FreeSans" font-size="14.00" fill="#6666ff">X::Syntax</text>
</a>
</g>
</g>
<!-- X::Syntax::Perl5Var&#45;&gt;X::Syntax -->
<g id="edge7" class="edge"><title>X::Syntax::Perl5Var&#45;&gt;X::Syntax</title>
<path fill="none" stroke="#6666ff" d="M107.236,-35.589C118.593,-44.9415 132.927,-56.7459 145.229,-66.8774"/>
<polygon fill="#6666ff" stroke="#6666ff" points="143.024,-69.5958 152.969,-73.2511 147.474,-64.1922 143.024,-69.5958"/>
</g>
<!-- Mu -->
<g id="node2" class="node"><title>Mu</title>
<g id="a_node2"><a xlink:href="/type/Mu" xlink:title="Mu">
<ellipse fill="none" stroke="#000000" cx="110.092" cy="-378" rx="27" ry="18"/>
<text text-anchor="middle" x="110.092" y="-374.3" font-family="FreeSans" font-size="14.00" fill="#000000">Mu</text>
</a>
</g>
</g>
<!-- Any -->
<g id="node3" class="node"><title>Any</title>
<g id="a_node3"><a xlink:href="/type/Any" xlink:title="Any">
<ellipse fill="none" stroke="#000000" cx="110.092" cy="-306" rx="27" ry="18"/>
<text text-anchor="middle" x="110.092" y="-302.3" font-family="FreeSans" font-size="14.00" fill="#000000">Any</text>
</a>
</g>
</g>
<!-- Any&#45;&gt;Mu -->
<g id="edge3" class="edge"><title>Any&#45;&gt;Mu</title>
<path fill="none" stroke="#000000" d="M110.092,-324.303C110.092,-332.017 110.092,-341.288 110.092,-349.888"/>
<polygon fill="#000000" stroke="#000000" points="106.592,-349.896 110.092,-359.896 113.592,-349.896 106.592,-349.896"/>
</g>
<!-- Exception&#45;&gt;Any -->
<g id="edge4" class="edge"><title>Exception&#45;&gt;Any</title>
<path fill="none" stroke="#000000" d="M110.092,-252.303C110.092,-260.017 110.092,-269.288 110.092,-277.888"/>
<polygon fill="#000000" stroke="#000000" points="106.592,-277.896 110.092,-287.896 113.592,-277.896 106.592,-277.896"/>
</g>
<!-- X::Comp -->
<g id="node5" class="node"><title>X::Comp</title>
<g id="a_node5"><a xlink:href="/type/X::Comp" xlink:title="X::Comp">
<ellipse fill="none" stroke="#6666ff" cx="207.092" cy="-162" rx="44.6926" ry="18"/>
<text text-anchor="middle" x="207.092" y="-158.3" font-family="FreeSans" font-size="14.00" fill="#6666ff">X::Comp</text>
</a>
</g>
</g>
<!-- X::Comp&#45;&gt;Exception -->
<g id="edge5" class="edge"><title>X::Comp&#45;&gt;Exception</title>
<path fill="none" stroke="#000000" d="M186.045,-178.189C172.537,-187.937 154.793,-200.742 139.853,-211.523"/>
<polygon fill="#000000" stroke="#000000" points="137.495,-208.909 131.434,-217.599 141.591,-214.585 137.495,-208.909"/>
</g>
<!-- X::Syntax&#45;&gt;Exception -->
<g id="edge6" class="edge"><title>X::Syntax&#45;&gt;Exception</title>
<path fill="none" stroke="#000000" d="M164.737,-107.847C154.063,-132.294 134.181,-177.829 121.569,-206.714"/>
<polygon fill="#000000" stroke="#000000" points="118.232,-205.61 117.438,-216.175 124.647,-208.411 118.232,-205.61"/>
</g>
<!-- X::Syntax&#45;&gt;X::Comp -->
<g id="edge8" class="edge"><title>X::Syntax&#45;&gt;X::Comp</title>
<path fill="none" stroke="#6666ff" d="M180.565,-107.945C184.649,-116.113 189.636,-126.088 194.18,-135.176"/>
<polygon fill="#6666ff" stroke="#6666ff" points="191.095,-136.832 198.698,-144.211 197.356,-133.701 191.095,-136.832"/>
</g>
</g>
</svg>

  <p class="fallback">
    <a
      rel="alternate"
      href="/images/type-graph-X%3A%3ASyntax%3A%3APerl5Var.svg"
      type="image/svg+xml"
      >Expand above chart</a
    >
  </p>
</figure>
<h1 id="Routines_supplied_by_class_Exception"><a class="u" href="#___top" title="go to top of document">Routines supplied by class Exception</a></h1>
<p>X::Syntax::Perl5Var inherits from class <a href="/type/Exception">Exception</a>, which provides the following routines:</p>
<h2 id="(Exception)_method_message"><a href="/type/Exception#method_message">(Exception) method message</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">method message(Exception:D: --&gt; Str:D)</pre>
<p>This is a stub that must be overwritten by subclasses, and should return the exception message.</p>
<p>Special care should be taken that this method does not produce an exception itself.</p>
<pre class="pod-block-code">try die &quot;Something bad happened&quot;;
if ($!) {
    say $!.message; # OUTPUT: «Something bad happened.␤»
}</pre>
<h2 id="(Exception)_method_backtrace"><a href="/type/Exception#method_backtrace">(Exception) method backtrace</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">method backtrace(Exception:D:)</pre>
<p>Returns the backtrace associated with the exception in a <a href="/type/Backtrace"><code>Backtrace</code></a> object or an empty string if there is none. Only makes sense on exceptions that have been thrown at least once.</p>
<pre class="pod-block-code">try die &quot;Something bad happened&quot;;
with $! { .backtrace.print ; }</pre>
<h2 id="(Exception)_method_throw"><a href="/type/Exception#method_throw">(Exception) method throw</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">method throw(Exception:D:)</pre>
<p>Throws the exception.</p>
<pre class="pod-block-code">my $exception = X::AdHoc.new;    # Totally fine
try $exception.throw;            # Throws
if ($!) { #`( some handling ) }; # Suppress the exception</pre>
<h2 id="(Exception)_method_resume"><a href="/type/Exception#method_resume">(Exception) method resume</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">method resume(Exception:D:)</pre>
<p>Resumes control flow where <code>.throw</code> left it when handled in a <code>CATCH</code> block.</p>
<pre class="pod-block-code"># For example, resume control flow for any exception
CATCH { default { .resume } }</pre>
<h2 id="(Exception)_method_rethrow"><a href="/type/Exception#method_rethrow">(Exception) method rethrow</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">method rethrow(Exception:D:)</pre>
<p>Rethrows an exception that has already been thrown at least once. This is different from <code>throw</code> in that it preserves the original backtrace.</p>
<pre class="pod-block-code">my $e = X::AdHoc.new(payload =&gt; &quot;Bad situation&quot;);
sub f() { die &#39;Bad&#39; };
sub g() { try f; CATCH { default { .rethrow } } };
g;
CATCH { default { say .backtrace.full } };</pre>
<h2 id="(Exception)_method_fail"><a href="/type/Exception#method_fail">(Exception) method fail</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">multi sub    fail(*@text)
multi sub    fail(Exception $e)
method fail(Exception:D:)</pre>
<p>Exits the calling <code>Routine</code> and returns a <a href="/type/Failure">Failure</a> object wrapping the exception <code>$e</code> - or, for the <code>*@text</code> form, an <a href="/type/X::AdHoc">X::AdHoc</a> exception constructed from the concatenation of <code>@text</code>. If the caller activated fatal exceptions via the pragma <code>use fatal;</code>, the exception is thrown instead of being returned as a <code>Failure</code>.</p>
<pre class="pod-block-code"># A custom exception defined
class ForbiddenDirectory is Exception {
    has Str $.name;

    method message { &quot;This directory is forbidden: &#39;$!name&#39;&quot; }
}

sub copy-directory-tree ($dir) {
    # We don&#39;t allow for non-directories to be copied
    fail &quot;$dir is not a directory&quot; if !$dir.IO.d;
    # We don&#39;t allow &#39;foo&#39; directory to be copied too
    fail ForbiddenDirectory.new(:name($dir)) if $dir eq &#39;foo&#39;;
    # or above can be written in method form as:
    # ForbiddenDirectory.new(:name($dir)).fail if $dir eq &#39;foo&#39;;
    # Do some actual copying here
    ...
}

# A Failure with X::AdHoc exception object is returned and
# assigned, so no throwing Would be thrown without an assignment
my $result = copy-directory-tree(&quot;cat.jpg&quot;);
say $result.exception; # OUTPUT: «cat.jpg is not a directory␤»

# A Failure with a custom Exception object is returned
$result = copy-directory-tree(&#39;foo&#39;);
say $result.exception; # OUTPUT: «This directory is forbidden: &#39;foo&#39;␤»</pre>
<h2 id="(Exception)_method_gist"><a href="/type/Exception#method_gist">(Exception) method gist</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">multi method gist(Exception:D:)</pre>
<p>Returns whatever the exception printer should produce for this exception. The default implementation returns message and backtrace separated by a newline.</p>
<pre class="pod-block-code">my $e = X::AdHoc.new(payload =&gt; &quot;This exception is pretty bad&quot;);
try $e.throw;
if ($!) { say $!.gist; };
# OUTPUT: «This exception is pretty bad
#   in block &lt;unit&gt; at &lt;unknown file&gt; line 1␤»</pre>
<h2 id="(Exception)_sub_die"><a href="/type/Exception#sub_die">(Exception) sub die</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">multi sub die()
multi sub die(*@message)
multi sub die(Exception:D $e)
method    die(Exception:D:)</pre>
<p>Throws a fatal <a href="/type/Exception">Exception</a>. The default exception handler prints each element of the list to <a href="/language/variables#index-entry-%24%2AERR"><code>$*ERR</code></a> (STDERR).</p>
<pre class="pod-block-code">die &quot;Important reason&quot;;
</pre>
<p>If the subroutine form is called without arguments, the value of <a href="/syntax/$!"><code>$!</code> variable</a> is checked. If it is set to a <a href="/language/mop#index-entry-syntax_DEFINITE-DEFINITE"><code>.DEFINITE</code></a> value, its value will be used as the <a href="/type/Exception">Exception</a> to throw if it&#39;s of type <a href="/type/Exception">Exception</a>, otherwise, it will be used as payload of <a href="/type/X::AdHoc">X::AdHoc</a> exception. If <code>$!</code> is not <code>.DEFINITE</code>, <a href="/type/X::AdHoc">X::AdHoc</a> with string <code>&quot;Died&quot;</code> as payload will be thrown.</p>
<p><code>die</code> will print by default the line number where it happens</p>
<pre class="pod-block-code">die &quot;Dead&quot;;
# OUTPUT: «(exit code 1) Dead␤
# in block &lt;unit&gt; at /tmp/dead.p6 line 1␤␤»
</pre>
<p>However, that default behavior is governed at the <code>Exception</code> level and thus can be changed to anything we want by capturing the exception using <code>CATCH</code>. This can be used, for instance, to suppress line numbers.</p>
<pre class="pod-block-code">CATCH {
  default {
    .payload.say
  }
};
die &quot;Dead&quot; # OUTPUT: «Dead␤»
</pre>
<h2 id="(Exception)_sub_warn"><a href="/type/Exception#sub_warn">(Exception) sub warn</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">multi sub warn(*@message)</pre>
<p>Throws a resumable warning exception, which is considered a control exception, and hence is invisible to most normal exception handlers. The outermost control handler will print the warning to <code>$*ERR</code>. After printing the warning, the exception is resumed where it was thrown. To override this behavior, catch the exception in a <code>CONTROL</code> block. A <code>quietly {...}</code> block is the opposite of a <code>try {...}</code> block in that it will suppress any warnings but pass fatal exceptions through.</p>
<p>To simply print to <code>$*ERR</code>, please use <code>note</code> instead. <code>warn</code> should be reserved for use in threatening situations when you don&#39;t quite want to throw an exception.</p>
<pre class="pod-block-code">warn &quot;Warning message&quot;;</pre>

    </div>
    
    </div>
<footer class="pretty-box yellow">
    <p>Generated from <a href="https://github.com/perl6/doc/blob/master/doc/Type/X::Syntax::Perl5Var.pod6">/type/X::Syntax::Perl5Var</a>.</p>
    <p>This is a work in progress to document Perl 6, and known to be
        incomplete.</p>
     <p><a href="https://github.com/perl6/doc/blob/master/CONTRIBUTING.md#reporting-bugs">Please report any issues</a>
      Your contribution is appreciated.</p>
  <p>
      This documentation is provided under the terms of the
      <a href="https://raw.githubusercontent.com/perl6/doc/master/LICENSE">Artistic License 2.0</a>.
      The Camelia image is <a href="https://raw.githubusercontent.com/perl6/mu/master/misc/camelia.txt"
        >copyright © 2009 by Larry Wall.</a>
      <!-- CREDITS -->
      <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->

  </p>
</footer>

<script type="text/javascript" src="/js/app.js?v=1"></script>
<script type="text/javascript" src="/js/search.js?v=3"></script>

    </body>
</html>
