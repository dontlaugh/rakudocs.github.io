<!doctype html>
<html lang="en">
    <head>
        <title>routine EVAL</title>
        <meta charset="UTF-8" />
        <style>
        kbd { font-family: "Droid Sans Mono", "Luxi Mono", "Inconsolata", monospace }
        samp { font-family: "Terminus", "Courier", "Lucida Console", monospace }
        u { text-decoration: none }
        .nested {
            margin-left: 3em;
        }
        aside, u { opacity: 0.7 }
        a[id^="fn-"]:target { background: #ff0 }
        </style>
        
        
        <meta name=viewport content="width=device-width, initial-scale=1">
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" type="text/css" href="/css/app.css?v=7" media="screen" title="default" />
<noscript> <style> #search { visibility: hidden; } </style> </noscript>

    </head>
    <body class="pod">
    <div id="___top"></div>
    <div id="header" class="pretty-box green">
  <a href="/"
    ><img
      src="/images/Camelia.svg"
      alt="»ö«"
      id="logo"
      width="62"
      height="48"
    />&nbsp;Raku Documentation</a
  >
  <div id="search" class="ui-widget">
    <div class="green">
      <input
        placeholder="Loading..."
        id="query"
        accesskey="f"
        title="Enter term to search for (hit Esc to focus)"
      />
    </div>
    <p id="not-found-message">
      Not in Index (<a href="" id="try-web-search">try site search</a>)
    </p>
  </div>
  <div class="menu">
    <div class="menu-items dark-green"><a class='menu-item darker-green' href='https://perl6.org'><strong>Perl&nbsp;6 homepage</strong></a>  <a class="menu-item " href="/language.html"> Language </a> <a class="menu-item " href="/type.html"> Types </a> <a class="menu-item selected darker-green" href="/routine.html"> Routines </a> <a class="menu-item " href="/programs.html"> Programs </a> <a class="menu-item " href="https://webchat.freenode.net/?channels=#perl6"> Chat with us </a></div><div class="menu-items darker-green"><a class="menu-item" href="/routine.html">All</a><a class="menu-item" href="/routine-sub.html"> Sub </a> <a class="menu-item" href="/routine-method.html"> Method </a> <a class="menu-item" href="/routine-term.html"> Term </a> <a class="menu-item" href="/routine-operator.html"> Operator </a> <a class="menu-item" href="/routine-trait.html"> Trait </a> <a class="menu-item" href="/routine-submethod.html"> Submethod </a> </div>
  </div>
</div>
<div id="content" class="pretty-box yellow content_fragment">
  

    <h1 class='title'>routine EVAL</h1>
    
    <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
    <tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#language_documentation_Independent_routines">language documentation Independent routines</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#(Independent_routines)_routine_EVAL">(Independent routines) routine EVAL</a></td></tr>
                                                                                <tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="#class_Cool">class Cool</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">2.1</td><td class="toc-text"><a href="#(Cool)_routine_EVAL">(Cool) routine EVAL</a></td></tr>
        
</table>
</nav>

    <div class="pod-body">
    <p>Documentation for routine <code>EVAL</code> assembled from the following types:</p>
<h1 id="language_documentation_Independent_routines"><a class="u" href="#___top" title="go to top of document">language documentation Independent routines</a></h1>
<p>From <a href="/language/independent-routines#routine_EVAL">Independent routines</a></p>
<h2 id="(Independent_routines)_routine_EVAL"><a href="/language/independent-routines#routine_EVAL">(Independent routines) routine EVAL</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">proto sub EVAL($code where Blob|Cool|Callable, Str() :$lang = &#39;perl6&#39;,
                PseudoStash :$context, *%n)
</pre>
<pre class="pod-block-code">multi sub EVAL($code, Str :$lang where { ($lang // &#39;&#39;) eq &#39;Perl5&#39; },
                PseudoStash :$context)
</pre>
<p>This routine coerces <a href="/type/Cool">Cool</a> <code>$code</code> to <a href="/type/Str">Str</a>. If <code>$code</code> is a <a href="/type/Blob">Blob</a>, it&#39;ll be processed using the same encoding as the <code>$lang</code> compiler would: for <code>perl6</code> <code>$lang</code>, uses <code>utf-8</code>; for <code>Perl5</code>, processes using the same rules as <code>perl</code>.</p>
<p>This works as-is with a literal string parameter. More complex input, such as a variable or string with embedded code, is illegal by default. This can be overridden in any of several ways:</p>
<pre class="pod-block-code">use MONKEY-SEE-NO-EVAL; # Or...
use MONKEY;             # shortcut that turns on all MONKEY pragmas
use Test;

# any of the above allows:
EVAL &quot;say { 5 + 5 }&quot;;   # OUTPUT: «10␤»</pre>
<p>In case the <code>MONKEY-SEE-NO-EVAL</code> pragma is not activated, the compiler will complain with a <code>EVAL is a very dangerous function!!!</code> exception. And it is essentially right, since that will run arbitrary code with the same permissions as the program. You should take care of cleaning the code that is going to pass through EVAL if you activate the <code>MONKEY-SEE-NO-EVAL</code> pragma.</p>
<p>Please note that you can interpolate to create routine names using quotation, as can be seen in <a href="/language/quoting#index-entry-%26_(interpolation)">this example</a> or <a href="/language/syntax#Identifiers">other ways to interpolate to create identifier names</a>. This only works, however, for already declared functions and other objects and is thus safer to use.</p>
<p>Symbols in the current lexical scope are visible to code in an <code>EVAL</code>.</p>
<pre class="pod-block-code">my $answer = 42;
EVAL &#39;say $answer;&#39;;    # OUTPUT: «42␤»</pre>
<p>However, since the set of symbols in a lexical scope is immutable after compile time, an <code>EVAL</code> can never introduce symbols into the surrounding scope.</p>
<pre class="pod-block-code">EVAL &#39;my $lives = 9&#39;; say $lives;   # error, $lives not declared
</pre>
<p>Furthermore, the <code>EVAL</code> is evaluated in the current package:</p>
<pre class="pod-block-code">module M {
    EVAL &#39;our $answer = 42&#39;
}
say $M::answer;         # OUTPUT: «42␤»</pre>
<p>And also in the current language, meaning any added syntax is available:</p>
<pre class="pod-block-code">sub infix:&lt;mean&gt;(*@a) is assoc&lt;list&gt; {
    @a.sum / @a.elems
}
EVAL &#39;say 2 mean 6 mean 4&#39;;     # OUTPUT: «4␤»</pre>
<p>An <code>EVAL</code> statement evaluates to the result of the last statement:</p>
<pre class="pod-block-code">sub infix:&lt;mean&gt;(*@a) is assoc&lt;list&gt; {
    @a.sum / @a.elems
}
say EVAL &#39;say 1; 2 mean 6 mean 4&#39;;         # OUTPUT: «1␤4␤»
</pre>
<p><code>EVAL</code> is also a gateway for executing code in other languages:</p>
<pre class="pod-block-code">EVAL &quot;use v5.20; say &#39;Hello from perl5!&#39;&quot;, :lang&lt;Perl5&gt;;
</pre>
<p>You need to have <a href="https://github.com/niner/Inline-Perl5"><code>Inline::Perl5</code></a> for this to work correctly.</p>
<h1 id="class_Cool"><a class="u" href="#___top" title="go to top of document">class Cool</a></h1>
<p>From <a href="/type/Cool#routine_EVAL">Cool</a></p>
<h2 id="(Cool)_routine_EVAL"><a href="/type/Cool#routine_EVAL">(Cool) routine EVAL</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">method EVAL(*%_)
</pre>
<p>It calls the <a href="/type/independent-routines#sub_mkdir">subroutine form</a> with the invocant as the first argument, <code>$code</code>, passing along named args, if any.</p>

    </div>
    
    </div>
<footer class="pretty-box yellow">
    <p>This is a work in progress to document Raku (formerly known as Perl 6),
        and known to be
        incomplete.</p>
     <p><a href="https://github.com/perl6/doc/blob/master/CONTRIBUTING.md#reporting-bugs">Please report any issues</a>
      Your contribution is appreciated.</p>
  <p>
      This documentation is provided under the terms of the
      <a href="https://raw.githubusercontent.com/perl6/doc/master/LICENSE">Artistic License 2.0</a>.
      The Camelia image is <a href="https://raw.githubusercontent.com/perl6/mu/master/misc/camelia.txt"
        >copyright © 2009 by Larry Wall.</a>
      <!-- CREDITS -->
      <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->

  </p>
</footer>

<script type="text/javascript" src="/js/app.js?v=1"></script>
<script type="text/javascript" src="/js/search.js?v=3"></script>
    </body>
</html>
